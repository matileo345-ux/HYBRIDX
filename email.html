<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generate Referral Code - HYBRIDX</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <div class="header-left">
      <img src="logo.png" alt="HYBRIDX" class="logo-img">
      <div class="logo-text">HYBRIDX</div>
    </div>
    <a href="index.html" class="about-btn">‚Üê Back</a>
  </header>

  <main>
    <section class="hero">
      <div class="tag">STEP 1: EMAIL VERIFICATION</div>
      <h1>Get Your <span class="gradient-text">Referral Code</span></h1>
      <p class="hero-text">Enter your email to generate your unique referral code and unlock exclusive bonuses.</p>

      <div class="email-box">
        <h2>Enter Your Email</h2>
        <input type="email" id="emailInput" placeholder="your@email.com" required>
        <button class="generate-btn" onclick="generateCode()">Generate My Code ‚Üí</button>
        <p id="errorMessage" style="color: #ef4444; margin-top: 12px; display: none;"></p>
      </div>

      <!-- Referral Code Display (hidden initially) -->
      <div id="referralDisplay" class="email-box" style="display: none; margin-top: 32px;">
        <h2>üéâ Your Referral Code</h2>
        <div style="background: rgba(102, 126, 234, 0.1); padding: 20px; border-radius: 8px; margin: 20px 0;">
          <p style="font-size: 14px; color: rgba(255, 255, 255, 0.6); margin-bottom: 8px;">Your Unique Code:</p>
          <p id="referralCode" style="font-size: 32px; font-weight: 800; color: #667eea; letter-spacing: 2px; margin-bottom: 12px;"></p>
          <button class="generate-btn" onclick="copyCode()" style="background: rgba(102, 126, 234, 0.2); margin-bottom: 16px;">
            üìã Copy Code
          </button>
        </div>

        <div style="text-align: left; margin-top: 24px; padding: 20px; background: rgba(255, 255, 255, 0.03); border-radius: 8px;">
          <h3 style="margin-bottom: 16px; font-size: 18px;">‚ú® What's Next?</h3>
          <ol style="color: rgba(255, 255, 255, 0.7); line-height: 2; padding-left: 20px;">
            <li>Share your referral code with friends</li>
            <li>Each 10 referrals = +$5 BNB bonus for staking</li>
            <li>Continue to deposit step below</li>
          </ol>
        </div>

        <button onclick="continueToDeposit()" class="generate-btn" style="margin-top: 24px; width: 100%; border: none; cursor: pointer;">
          Continue to Deposit ‚Üí
        </button>
      </div>

      <!-- Referral Stats -->
      <div id="referralStats" class="email-box" style="display: none; margin-top: 32px;">
        <h2>üìä Your Referral Stats</h2>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 20px;">
          <div style="background: rgba(102, 126, 234, 0.1); padding: 20px; border-radius: 8px; text-align: center;">
            <p style="font-size: 14px; color: rgba(255, 255, 255, 0.6); margin-bottom: 8px;">Total Referrals</p>
            <p id="totalReferrals" style="font-size: 28px; font-weight: 700; color: #667eea;">0</p>
          </div>
          <div style="background: rgba(16, 185, 129, 0.1); padding: 20px; border-radius: 8px; text-align: center;">
            <p style="font-size: 14px; color: rgba(255, 255, 255, 0.6); margin-bottom: 8px;">Bonus BNB</p>
            <p id="bonusBNB" style="font-size: 28px; font-weight: 700; color: #10b981;">$0</p>
          </div>
        </div>
      </div>
    </section>

    <section class="why-join">
      <h2>How Referrals Work</h2>
      <div class="cards">
        <div class="card">
          <div class="icon">üîó</div>
          <h3>Share Your Code</h3>
          <p>Give your unique referral code to friends who want to join HYBRIDX</p>
        </div>
        <div class="card">
          <div class="icon">üí∞</div>
          <h3>Earn Bonuses</h3>
          <p>Every 10 successful referrals unlocks +$5 BNB for your launchpool stake</p>
        </div>
        <div class="card">
          <div class="icon">üöÄ</div>
          <h3>Maximize Rewards</h3>
          <p>More stake = more $HYBX tokens earned before DEX listing</p>
        </div>
      </div>
    </section>

    <footer>
      <a href="https://x.com/HYBRIDX_HYBX" class="follow-btn">Follow X</a>
    </footer>
  </main>

  <script src="script.js"></script>
  <script>
    function generateCode() {
      const emailInput = document.getElementById('emailInput');
      const email = emailInput.value.trim();
      const errorMessage = document.getElementById('errorMessage');
      
      // Validate email
      if (!email) {
        errorMessage.textContent = 'Please enter your email address';
        errorMessage.style.display = 'block';
        return;
      }
      
      if (!isValidEmail(email)) {
        errorMessage.textContent = 'Please enter a valid email address';
        errorMessage.style.display = 'block';
        return;
      }
      
      // Generate referral code
      const referralCode = generateReferralCode(email);
      
      // Store user data
      storeUserData(email, referralCode);
      trackReferral(referralCode);
      
      // Display referral code
      document.getElementById('referralCode').textContent = referralCode;
      document.getElementById('referralDisplay').style.display = 'block';
      document.getElementById('referralStats').style.display = 'block';
      
      // Update stats
      updateReferralStats(referralCode);
      
      // Hide error message
      errorMessage.style.display = 'none';
      
      // Show success notification
      showNotification('Referral code generated successfully!', 'success');
      
      // Scroll to code display
      document.getElementById('referralDisplay').scrollIntoView({ behavior: 'smooth' });
    }
    
    function continueToDeposit() {
      const userData = getUserData();
      if (!userData || !userData.referralCode) {
        showNotification('Please generate your referral code first', 'error');
        return;
      }
      window.location.href = 'deposit.html';
    }
    
    function copyCode() {
      const code = document.getElementById('referralCode').textContent;
      copyToClipboard(code);
    }
    
    function updateReferralStats(referralCode) {
      const count = getReferralCount(referralCode);
      const bonus = calculateBonusBNB(count);
      
      document.getElementById('totalReferrals').textContent = count;
      document.getElementById('bonusBNB').textContent = '$' + bonus;
    }
    
    // Check if user already has data
    window.addEventListener('DOMContentLoaded', function() {
      const userData = getUserData();
      if (userData && userData.email && userData.referralCode) {
        document.getElementById('emailInput').value = userData.email;
        document.getElementById('referralCode').textContent = userData.referralCode;
        document.getElementById('referralDisplay').style.display = 'block';
        document.getElementById('referralStats').style.display = 'block';
        updateReferralStats(userData.referralCode);
      }
    });
  </script>
</body>
</html>
