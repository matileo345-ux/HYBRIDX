<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generate Referral Code - HYBRIDX</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <div class="header-left">
      <img src="logo.png" alt="HYBRIDX" class="logo-img">
      <div class="logo-text">HYBRIDX</div>
    </div>
    <a href="index.html" class="about-btn">â† Back</a>
  </header>

  <main>
    <section class="hero">
      <div class="tag">STEP 1: EMAIL VERIFICATION</div>
      <h1>Get Your <span class="gradient-text">Referral Code</span></h1>
      <p class="hero-text">Enter your email to generate your unique referral code and unlock exclusive bonuses.</p>

      <div class="email-box">
        <h2>Enter Your Email</h2>
        <input type="email" id="emailInput" placeholder="your@email.com" required>
        <button class="generate-btn" onclick="generateCode()">Generate My Code â†’</button>
        <p id="errorMessage" style="color: #ef4444; margin-top: 12px; display: none;"></p>
      </div>

      <!-- Referral Code Display (hidden initially) -->
      <div id="referralDisplay" class="email-box" style="display: none; margin-top: 32px;">
        <h2>ğŸ‰ Email Verified!</h2>
        <div style="background: rgba(102, 126, 234, 0.1); padding: 20px; border-radius: 8px; margin: 20px 0;">
          <p style="font-size: 14px; color: rgba(255, 255, 255, 0.6); margin-bottom: 8px;">Your Unique Referral Code:</p>
          <p id="referralCode" style="font-size: 32px; font-weight: 800; color: #667eea; letter-spacing: 2px; margin-bottom: 12px;"></p>
          <p style="font-size: 13px; color: rgba(255, 255, 255, 0.5);">You'll get your referral link after completing all steps</p>
        </div>

        <div style="text-align: left; margin-top: 24px; padding: 20px; background: rgba(255, 255, 255, 0.03); border-radius: 8px;">
          <h3 style="margin-bottom: 16px; font-size: 18px;">âœ¨ Next Steps</h3>
          <ol style="color: rgba(255, 255, 255, 0.7); line-height: 2; padding-left: 20px;">
            <li>Complete your BNB deposit</li>
            <li>Connect your wallet</li>
            <li>Get your referral link and start earning bonuses!</li>
          </ol>
        </div>

        <p style="margin-top: 20px; color: #10b981; font-weight: 600;">âœ… Redirecting to deposit page...</p>
      </div>
    </section>

    <section class="why-join">
      <h2>Why Complete Your Registration?</h2>
      <div class="cards">
        <div class="card">
          <div class="icon">ğŸ’°</div>
          <h3>$50 BNB Stake Allocation</h3>
          <p>Deposit just $2 BNB to receive $50 BNB for launchpool staking</p>
        </div>
        <div class="card">
          <div class="icon">ğŸ</div>
          <h3>Referral Bonuses</h3>
          <p>Share your link after registration. Every 10 referrals = +$5 BNB bonus</p>
        </div>
        <div class="card">
          <div class="icon">ğŸš€</div>
          <h3>Early Access</h3>
          <p>Be among the first 10,000 to join the world's first hybrid launchpool</p>
        </div>
      </div>
    </section>

    <footer>
      <a href="https://x.com/HYBRIDX_HYBX" class="follow-btn">Follow X</a>
    </footer>
  </main>

  <script src="script.js"></script>
  <script>
    function generateCode() {
      const emailInput = document.getElementById('emailInput');
      const email = emailInput.value.trim();
      const errorMessage = document.getElementById('errorMessage');
      
      // Validate email
      if (!email) {
        errorMessage.textContent = 'Please enter your email address';
        errorMessage.style.display = 'block';
        return;
      }
      
      if (!isValidEmail(email)) {
        errorMessage.textContent = 'Please enter a valid email address';
        errorMessage.style.display = 'block';
        return;
      }
      
      // Generate referral code
      const referralCode = generateReferralCode(email);
      
      // Store user data
      storeUserData(email, referralCode);
      trackReferral(referralCode);
      
      // Display referral code
      document.getElementById('referralCode').textContent = referralCode;
      document.getElementById('referralDisplay').style.display = 'block';
      
      // Hide error message
      errorMessage.style.display = 'none';
      
      // Show success notification
      showNotification('Email verified! Redirecting to deposit...', 'success');
      
      // Scroll to code display
      document.getElementById('referralDisplay').scrollIntoView({ behavior: 'smooth' });
      
      // Auto-redirect after 3 seconds
      setTimeout(() => {
        window.location.href = 'deposit.html';
      }, 3000);
    }
    
    function continueToDeposit() {
      const userData = getUserData();
      if (!userData || !userData.referralCode) {
        showNotification('Please generate your referral code first', 'error');
        return;
      }
      window.location.href = 'deposit.html';
    }
    
    function updateReferralStats(referralCode) {
      const count = getReferralCount(referralCode);
      const bonus = calculateBonusBNB(count);
      
      document.getElementById('totalReferrals').textContent = count;
      document.getElementById('bonusBNB').textContent = '
    
    // Check if user already has data
    window.addEventListener('DOMContentLoaded', function() {
      const userData = getUserData();
      if (userData && userData.email && userData.referralCode) {
        document.getElementById('emailInput').value = userData.email;
        showNotification('You already have a referral code! Redirecting to deposit...', 'info');
        setTimeout(() => {
          window.location.href = 'deposit.html';
        }, 2000);
      }
    });
  </script>
